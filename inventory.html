<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Inventory - Medusa Nextgen Display</title>
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500&family=Roboto&display=swap" rel="stylesheet">
<style>
  body {
    font-family:'Roboto',sans-serif;
    margin:0;
    background: linear-gradient(135deg,#ff6a00,#ee0979);
    color:#fff;
    display:flex;
    flex-direction:column;
    align-items:center;
    min-height:100vh;
    padding:20px;
  }
  h1 {
    font-family: 'Orbitron', sans-serif;
    font-size:2.5em;
    background: linear-gradient(90deg,#0ff,#f0f);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    margin-bottom:20px;
  }
  input {
    padding:10px;
    border-radius:5px;
    border:none;
    width:250px;
    margin-bottom:10px;
  }
  button {
    background: linear-gradient(90deg,#00f,#0ff);
    color:#fff;
    border:none;
    padding:10px 20px;
    border-radius:10px;
    font-weight:bold;
    cursor:pointer;
    transition:0.3s;
    margin-bottom:15px;
  }
  button:hover { transform: scale(1.05); }
  table {
    width:90%;
    max-width:700px;
    border-collapse: collapse;
  }
  th, td {
    border:1px solid #fff;
    padding:8px;
    text-align:center;
  }
  th {
    background: rgba(0,0,0,0.3);
  }
</style>
</head>
<body>
  <h1>Inventory Price Check</h1>
  <input type="text" id="itemName" placeholder="Search Model">
  <button onclick="checkPrice()">Search</button>
  <table id="inventoryTable">
    <thead>
      <tr>
        <th>Item Name</th>
        <th>Price</th>
        <th>Quantity</th>
      </tr>
    </thead>
    <tbody id="tableBody">
      <!-- Inventory items will appear here -->
    </tbody>
  </table>

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
<script>
  const firebaseConfig = {
    apiKey: "AIzaSyCyBWuKREPhHPOEFVxUGszbpDdXKQGcdEg",
  authDomain: "repairtrackersystem.firebaseapp.com",
  projectId: "repairtrackersystem",
  storageBucket: "repairtrackersystem.firebasestorage.app",
  messagingSenderId: "181636666453",
  appId: "1:181636666453:web:9fa73b02c4a6cbba7370dc"
  };
  firebase.initializeApp(firebaseConfig);
  const db = firebase.firestore();

  let inventoryList = [];

  async function loadInventory(){
    const snapshot = await db.collection("inventory").get();
    inventoryList = snapshot.docs.map(doc => doc.data());
    displayInventory(inventoryList);
  }

  function displayInventory(list){
    const tbody = document.getElementById("tableBody");
    tbody.innerHTML = '';
    list.forEach(item => {
      const tr = document.createElement("tr");
      tr.innerHTML = `<td>${item.itemName}</td><td>${item.price}</td><td>${item.quantity}</td>`;
      tbody.appendChild(tr);
    });
  }

  function checkPrice(){
    const search = document.getElementById("itemName").value.toLowerCase();
    if(!search){ 
      displayInventory(inventoryList); 
      return;
    }
    // Move searched item to top
    const sortedList = [...inventoryList].sort((a,b)=>{
      if(a.itemName.toLowerCase() === search) return -1;
      if(b.itemName.toLowerCase() === search) return 1;
      return 0;
    });
    displayInventory(sortedList);
  }

  // Load inventory on page load
  window.onload = loadInventory;
</script>
</body>
</html>
